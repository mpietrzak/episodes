!function n(t,e,r){function o(u,a){if(!e[u]){if(!t[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var c=e[u]={exports:{}};t[u][0].call(c.exports,function(n){var e=t[u][1][n];return o(e?e:n)},c,c.exports,n,t,e,r)}return e[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(n,t,e){var r={};!function(n){"use strict";n.returnE=function(n){return function(){return n}},n.bindE=function(n){return function(t){return function(){return t(n())()}}}}(r["Control.Monad.Eff"]=r["Control.Monad.Eff"]||{}),function(n){"use strict";n.arrayMap=function(n){return function(t){for(var e=t.length,r=new Array(e),o=0;e>o;o++)r[o]=n(t[o]);return r}},n.refEq=function(n){return function(t){return n===t}},n.boolOr=function(n){return function(t){return n||t}},n.boolAnd=function(n){return function(t){return n&&t}},n.boolNot=function(n){return!n},n.showIntImpl=function(n){return n.toString()},n.showNumberImpl=function(n){return n===(0|n)?n+".0":n.toString()},n.showStringImpl=function(n){return JSON.stringify(n)},n.showArrayImpl=function(n){return function(t){for(var e=[],r=0,o=t.length;o>r;r++)e[r]=n(t[r]);return"["+e.join(",")+"]"}}}(r.Prelude=r.Prelude||{}),function(n){"use strict";var t=r.Prelude,e=function(n){this.compose=n},o=function(n,t){this["__superclass_Prelude.Semigroupoid_0"]=n,this.id=t},i=function(n){this.map=n},u=function(n,t){this["__superclass_Prelude.Functor_0"]=n,this.apply=t},a=function(n,t){this["__superclass_Prelude.Apply_0"]=n,this.pure=t},s=function(n,t){this["__superclass_Prelude.Apply_0"]=n,this.bind=t},f=function(n,t){this["__superclass_Prelude.Applicative_0"]=n,this["__superclass_Prelude.Bind_1"]=t},c=function(n){this.eq=n},l=function(n,t){this.bottom=n,this.top=t},p=function(n,t,e,r){this["__superclass_Prelude.Bounded_0"]=n,this.conj=t,this.disj=e,this.not=r},d=function(n){this.show=n},h={},v=function(n){return n.top},g=new d(t.showStringImpl),y=new d(t.showNumberImpl),m=new d(t.showIntImpl),w=new d(function(n){if(n)return"true";if(!n)return"false";throw new Error("Failed pattern match at Prelude line 829, column 1 - line 833, column 1: "+[n.constructor.name])}),E=function(n){return n.show},b=function(n){return new d(t.showArrayImpl(E(n)))},M=new e(function(n){return function(t){return function(e){return n(t(e))}}}),S=function(n){return n.pure},D=function(n){return S(n)},C=function(n){return n.not},x=function(n){return n.map},A=function(n){return n.id},_=new i(t.arrayMap),q=function(n){return function(t){return function(e){return n(e)(t)}}},P=new c(t.refEq),I=function(n){return n.eq},j=function(n){return I(n)},F=function(n){return n.disj},k=function(n){return function(t){return n}},O=function(n){return n.conj},T=function(n){return n.compose},N=function(n){return q(T(n))},J=new o(function(){return M},function(n){return n}),Q=new l(!1,!0),B=function(n){return n.bottom},L=new p(function(){return Q},t.boolAnd,t.boolOr,t.boolNot),R=function(n){return function(t){return function(e){return C(L)(j(n)(t)(e))}}},X=function(n){return n.bind},V=function(n){return X(n)},U=function(n){return n.apply},Z=function(n){return U(n)},z=function(n){return function(t){return function(e){return Z(n["__superclass_Prelude.Apply_0"]())(S(n)(t))(e)}}},G=function(n){return n.append},Y=function(n){return G(n)},W=function(n){return function(t){return function(e){return X(n["__superclass_Prelude.Bind_1"]())(t)(function(t){return X(n["__superclass_Prelude.Bind_1"]())(e)(function(e){return D(n["__superclass_Prelude.Applicative_0"]())(t(e))})})}}};n.Show=d,n.BooleanAlgebra=p,n.Bounded=l,n.Eq=c,n.Monad=f,n.Bind=s,n.Applicative=a,n.Apply=u,n.Functor=i,n.Category=o,n.Semigroupoid=e,n.show=E,n.not=C,n.disj=F,n.conj=O,n.bottom=B,n.top=v,n["/="]=R,n.eq=I,n["<>"]=Y,n.append=G,n.ap=W,n["return"]=D,n[">>="]=V,n.bind=X,n.liftA1=z,n.pure=S,n.apply=U,n.map=x,n.id=A,n[">>>"]=N,n.compose=T,n["const"]=k,n.flip=q,n.unit=h,n.semigroupoidFn=M,n.categoryFn=J,n.functorArray=_,n.eqChar=P,n.boundedBoolean=Q,n.booleanAlgebraBoolean=L,n.showBoolean=w,n.showInt=m,n.showNumber=y,n.showString=g,n.showArray=b}(r.Prelude=r.Prelude||{}),function(n){"use strict";var t=r["Control.Monad.Eff"],e=r.Prelude,o=new e.Monad(function(){return a},function(){return i}),i=new e.Bind(function(){return u},t.bindE),u=new e.Apply(function(){return s},e.ap(o)),a=new e.Applicative(function(){return u},t.returnE),s=new e.Functor(e.liftA1(a));n.functorEff=s,n.applyEff=u,n.applicativeEff=a,n.bindEff=i,n.monadEff=o}(r["Control.Monad.Eff"]=r["Control.Monad.Eff"]||{}),function(n){"use strict";n.log=function(n){return function(){return console.log(n),{}}}}(r["Control.Monad.Eff.Console"]=r["Control.Monad.Eff.Console"]||{}),function(n){"use strict";var t=r["Control.Monad.Eff.Console"];r.Prelude,r["Control.Monad.Eff"];n.log=t.log}(r["Control.Monad.Eff.Console"]=r["Control.Monad.Eff.Console"]||{}),function(n){"use strict";n.ready=function(n){return function(){jQuery(document).ready(n)}},n.select=function(n){return function(){return jQuery(n)}},n.find=function(n){return function(t){return function(){return t.find(n)}}},n.parent=function(n){return function(){return n.parent()}},n.closest=function(n){return function(t){return function(){return t.closest(n)}}},n.create=function(n){return function(){return jQuery(n)}},n.setAttr=function(n){return function(t){return function(e){return function(){return e.attr(n,t)}}}},n.attr=function(n){return function(t){return function(){return t.attr(n)}}},n.css=function(n){return function(t){return function(){return t.css(n)}}},n.toggleClass=function(n){return function(t){return function(){return t.toggleClass(n)}}},n.setClass=function(n){return function(t){return function(e){return function(){return e.toggleClass(n,t)}}}},n.append=function(n){return function(t){return function(){return t.append(n)}}},n.remove=function(n){return function(){return n.remove()}},n.setText=function(n){return function(t){return function(){return t.text(n)}}},n.on=function(n){return function(t){return function(e){return function(){return e.on(n,function(n){t(n)(jQuery(this))()})}}}},n.preventDefault=function(n){return function(){n.preventDefault()}}}(r["Control.Monad.Eff.JQuery"]=r["Control.Monad.Eff.JQuery"]||{}),function(n){"use strict";var t=r["Control.Monad.Eff.JQuery"],e=(r.Prelude,r.DOM,r["Data.Foreign"],r["Control.Monad.Eff"],function(n){return t.setClass(n)(!1)}),o=function(n){return t.setClass(n)(!0)};n.removeClass=e,n.addClass=o,n.preventDefault=t.preventDefault,n.on=t.on,n.setText=t.setText,n.remove=t.remove,n.append=t.append,n.css=t.css,n.setAttr=t.setAttr,n.create=t.create,n.closest=t.closest,n.parent=t.parent,n.find=t.find,n.select=t.select,n.ready=t.ready}(r["Control.Monad.Eff.JQuery"]=r["Control.Monad.Eff.JQuery"]||{}),function(t){var e=n("big-integer");t.fromInt=e,t.toString=function(n){return n.toString()}}(r["Data.BigInt"]=r["Data.BigInt"]||{}),function(n){"use strict";var t=(r.Prelude,function(n){return n.mempty});n.mempty=t}(r["Data.Monoid"]=r["Data.Monoid"]||{}),function(n){"use strict";var t=r.Prelude,e=(r["Data.Functor.Invariant"],r["Control.Alt"],r["Control.Alternative"],r["Control.Extend"],r["Control.MonadPlus"],r["Control.Plus"],r["Data.Monoid"],function(){function n(){}return n.value=new n,n}()),o=function(){function n(n){this.value0=n}return n.create=function(t){return new n(t)},n}(),i=function(n){return new t.Show(function(r){if(r instanceof o)return"Just ("+(t.show(n)(r.value0)+")");if(r instanceof e)return"Nothing";throw new Error("Failed pattern match at Data.Maybe line 289, column 1 - line 291, column 19: "+[r.constructor.name])})},u=function(n){return function(t){return function(r){if(r instanceof e)return n;if(r instanceof o)return t(r.value0);throw new Error("Failed pattern match at Data.Maybe line 26, column 1 - line 27, column 1: "+[n.constructor.name,t.constructor.name,r.constructor.name])}}},a=u(!1)(t["const"](!0));n.Nothing=e,n.Just=o,n.isJust=a,n.maybe=u,n.showMaybe=i}(r["Data.Maybe"]=r["Data.Maybe"]||{}),function(n){"use strict";var t=r["Data.BigInt"],e=r.Prelude,o=(r["Data.Maybe"],new e.Show(function(n){return'fromString "'+(t.toString(n)+'"')}));n.showBigInt=o,n.fromInt=t.fromInt}(r["Data.BigInt"]=r["Data.BigInt"]||{}),function(n){"use strict";n.foldrArray=function(n){return function(t){return function(e){for(var r=t,o=e.length,i=o-1;i>=0;i--)r=n(e[i])(r);return r}}},n.foldlArray=function(n){return function(t){return function(e){for(var r=t,o=e.length,i=0;o>i;i++)r=n(r)(e[i]);return r}}}}(r["Data.Foldable"]=r["Data.Foldable"]||{}),function(n){"use strict";var t=r["Data.Foldable"],e=r.Prelude,o=r["Data.Monoid"],i=(r["Control.Apply"],r["Data.Monoid.Disj"],r["Data.Monoid.Conj"],r["Data.Maybe"],r["Data.Maybe.First"],r["Data.Maybe.Last"],r["Data.Monoid.Additive"],r["Data.Monoid.Dual"],r["Data.Monoid.Multiplicative"],function(n,t,e){this.foldMap=n,this.foldl=t,this.foldr=e}),u=function(n){return n.foldr},a=function(n){return n.foldl},s=new i(function(n){return function(t){return function(r){return u(s)(function(r){return function(o){return e["<>"](n["__superclass_Prelude.Semigroup_0"]())(t(r))(o)}})(o.mempty(n))(r)}}},t.foldlArray,t.foldrArray),f=function(n){return n.foldMap};n.Foldable=i,n.foldMap=f,n.foldl=a,n.foldr=u,n.foldableArray=s}(r["Data.Foldable"]=r["Data.Foldable"]||{}),function(n){"use strict";n.fromStringImpl=function(n){return function(t){return function(e){var r=parseFloat(e);return(0|r)===r?n(r):t}}}}(r["Data.Int"]=r["Data.Int"]||{}),function(n){"use strict";var t=r["Data.Int"],e=(r.Prelude,r.Math,r["Data.Maybe.Unsafe"],r["Data.Int.Bits"],r["Data.Maybe"]),o=t.fromStringImpl(e.Just.create)(e.Nothing.value);n.fromString=o}(r["Data.Int"]=r["Data.Int"]||{}),function(n){"use strict";n._indexOf=function(n){return function(t){return function(e){return function(r){var o=r.indexOf(e);return-1===o?t:n(o)}}}},n.length=function(n){return n.length},n.replace=function(n){return function(t){return function(e){return e.replace(n,t)}}},n.take=function(n){return function(t){return t.substr(0,n)}},n.count=function(n){return function(t){for(var e=0;e<t.length&&n(t.charAt(e));e++);return e}}}(r["Data.String"]=r["Data.String"]||{}),function(n){"use strict";var t=r["Data.String"],e=(r["Data.Char"],r.Prelude,r["Data.String.Unsafe"],r["Data.Maybe"]),o=(r["Data.Monoid"],function(n){return function(e){return t.take(t.count(n)(e))(e)}}),i=t._indexOf(e.Just.create)(e.Nothing.value),u=function(n){return function(t){return e.isJust(i(n)(t))}};n.takeWhile=o,n.indexOf=i,n.contains=u,n.replace=t.replace}(r["Data.String"]=r["Data.String"]||{}),function(n){"use strict";n["regex'"]=function(n){return function(t){return new RegExp(n,t)}}}(r["Data.String.Regex"]=r["Data.String.Regex"]||{}),function(n){"use strict";var t=r["Data.String.Regex"],e=(r.Prelude,r["Data.String"]),o=(r["Data.Maybe"],function(n){return function(){if(n.global)return"g";if(!n.global)return"";throw new Error("Failed pattern match at Data.String.Regex line 63, column 1 - line 64, column 1: "+[n.global.constructor.name])}()+(function(){if(n.ignoreCase)return"i";if(!n.ignoreCase)return"";throw new Error("Failed pattern match at Data.String.Regex line 63, column 1 - line 64, column 1: "+[n.ignoreCase.constructor.name])}()+(function(){if(n.multiline)return"m";if(!n.multiline)return"";throw new Error("Failed pattern match at Data.String.Regex line 63, column 1 - line 64, column 1: "+[n.multiline.constructor.name])}()+(function(){if(n.sticky)return"y";if(!n.sticky)return"";throw new Error("Failed pattern match at Data.String.Regex line 63, column 1 - line 64, column 1: "+[n.sticky.constructor.name])}()+function(){if(n.unicode)return"u";if(!n.unicode)return"";throw new Error("Failed pattern match at Data.String.Regex line 63, column 1 - line 64, column 1: "+[n.unicode.constructor.name])}())))}),i=function(n){return function(e){return t["regex'"](n)(o(e))}},u=function(n){return{global:e.contains("g")(n),ignoreCase:e.contains("i")(n),multiline:e.contains("m")(n),sticky:e.contains("y")(n),unicode:e.contains("u")(n)}};n.parseFlags=u,n.renderFlags=o,n.regex=i}(r["Data.String.Regex"]=r["Data.String.Regex"]||{}),function(n){"use strict";n.traverseArrayImpl=function(){function n(n){this.fn=n}function t(n){return function(t){return new o(n,t)}}function e(n){for(var t=[];n!==r;)t.push(n.head),n=n.tail;return t}var r={},o=function(n,t){this.head=n,this.tail=t};return function(o){return function(i){return function(u){return function(a){var s=function(n,e){return o(i(t)(a(n)))(e)},f=function(t,e,r){if(0===e)return t;var o=r[e-1];return new n(function(){return f(s(o,t),e-1,r)})};return function(t){for(var o=f(u(r),t.length,t);o instanceof n;)o=o.fn();return i(e)(o)}}}}}}()}(r["Data.Traversable"]=r["Data.Traversable"]||{}),function(n){"use strict";var t=r["Data.Traversable"],e=r.Prelude,o=r["Data.Foldable"],i=(r["Data.Maybe"],r["Data.Maybe.First"],r["Data.Maybe.Last"],r["Data.Monoid.Additive"],r["Data.Monoid.Dual"],r["Data.Monoid.Multiplicative"],r["Data.Monoid.Disj"],r["Data.Monoid.Conj"],function(n,t,e,r){this["__superclass_Data.Foldable.Foldable_1"]=n,this["__superclass_Prelude.Functor_0"]=t,this.sequence=e,this.traverse=r}),u=function(n){return n.traverse},a=new i(function(){return o.foldableArray},function(){return e.functorArray},function(n){return u(a)(n)(e.id(e.categoryFn))},function(n){return t.traverseArrayImpl(e.apply(n["__superclass_Prelude.Apply_0"]()))(e.map(n["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]()))(e.pure(n))}),s=function(n){return n.sequence},f=function(n){return function(t){return function(e){return function(r){return u(t)(n)(r)(e)}}}};n.Traversable=i,n["for"]=f,n.sequence=s,n.traverse=u,n.traversableArray=a}(r["Data.Traversable"]=r["Data.Traversable"]||{}),function(n){"use strict";n.ajax=function(n){return function(){return jQuery.ajax(n)}},n.first=function(n){return function(){return n.first()}},n.getAttr=function(n){return function(t){return function(){return t.attr(n)}}},n.getJQueryEventPageX=function(n){return function(){return n.pageX}},n.getJQueryEventPageY=function(n){return function(){return n.pageY}},n.getValueText=function(n){return function(){return n.val()||""}},n.is=function(n){return function(t){return function(){return t.is(n)}}},n.jqXhrDone=function(n){return function(t){return function(){return n.done(function(n,e,r){t(n)(e)(r)()})}}},n.jqXhrFail=function(n){return function(t){return function(){return n.fail(function(n,e,r){t(n)(e)(r)()})}}},n.jsonStringify=function(n){return function(){return JSON.stringify(n,null,"    ")}},n.jQueryFadeIn=function(n){return function(t){return function(){return t.fadeIn(n)}}},n["jQueryFadeOut'"]=function(n){return function(t){return function(e){return function(){return e.fadeOut(n,t)}}}},n.nextUntil=function(n){return function(t){return function(){return t.nextUntil(n)}}},n.on=function(n){return function(t){return function(e){return function(){return e.on(n,function(n){t(n)(jQuery(this))()})}}}},n.prevAll=function(n){return function(t){return function(){return t.prevAll(n)}}},n.redirect=function(n){return function(){window.location.href=n}},n.size=function(n){return n.size()},n.split=function(n){return function(t){return t.split(n)}}}(r["Episodes.Common"]=r["Episodes.Common"]||{}),function(n){"use strict";var t=r["Episodes.Common"],e=r.Prelude,o=r["Control.Monad.Eff.JQuery"],i=(r["Control.Monad.Eff.Console"],r["Control.Monad.Eff"]),u=r["Data.Maybe"],a=(r["Data.String.Regex"],r.DOM,function(){var n=o.select("#auth-id")();return function(){var r=t.size(n);return 1===r?function(){var r=t.getValueText(n)();return e["return"](i.applicativeEff)(new u.Just(r))()}:e["return"](i.applicativeEff)(u.Nothing.value)}()()});n.getAuthId=a,n.split=t.split,n.size=t.size,n.redirect=t.redirect,n.prevAll=t.prevAll,n.on=t.on,n.nextUntil=t.nextUntil,n["jQueryFadeOut'"]=t["jQueryFadeOut'"],n.jQueryFadeIn=t.jQueryFadeIn,n.jsonStringify=t.jsonStringify,n.jqXhrFail=t.jqXhrFail,n.jqXhrDone=t.jqXhrDone,n.is=t.is,n.getValueText=t.getValueText,n.getJQueryEventPageY=t.getJQueryEventPageY,n.getJQueryEventPageX=t.getJQueryEventPageX,n.getAttr=t.getAttr,n.first=t.first,n.ajax=t.ajax}(r["Episodes.Common"]=r["Episodes.Common"]||{}),function(n){"use strict";n.readInt=function(n){return function(t){return parseInt(t,n)}}}(r.Global=r.Global||{}),function(n){"use strict";var t=r.Global;n.readInt=t.readInt}(r.Global=r.Global||{}),function(n){"use strict";var t=r["Data.String"],e=r.Prelude,o=r["Data.Foldable"],i=r["Data.String.Regex"],u=r["Episodes.Common"],a=r["Control.Monad.Eff.JQuery"],s=r.Global,f=r["Control.Monad.Eff.Console"],c=r["Data.Traversable"],l=r["Control.Monad.Eff"],p=(r.DOM,function(n){return function(n){return function(){var t=a.find("a.episode-links")(n)();return a.css({visibility:"hidden"})(t)(),e["return"](l.applicativeEff)(e.unit)()}}}),d=function(n){return function(n){return function(){var t=a.find("a.episode-links")(n)();return a.css({visibility:"visible"})(t)(),e["return"](l.applicativeEff)(e.unit)()}}},h=function(n){return function(n){return function(){return f.log("leave links div")(),u["jQueryFadeOut'"](100)(a.remove(n))(n)(),e["return"](l.applicativeEff)(e.unit)()}}},v=function(){var n=a.select("#user-episode-links")(),t=u.getValueText(n)();return e["return"](l.applicativeEff)(t)()},g=function(n){return function(){var t=e[">>="](l.bindEff)(a.find("input.episode-title")(n))(u.getValueText)(),r=e[">>="](l.bindEff)(a.find("input.episode-show-title")(n))(u.getValueText)(),o=function(){var t=e[">>="](l.bindEff)(a.find("input.episode-show-title")(n))(u.getValueText)();return e["return"](l.applicativeEff)(s.readInt(10)(t))()}(),i=function(){var t=e[">>="](l.bindEff)(a.find("input.episode-number")(n))(u.getValueText)();return e["return"](l.applicativeEff)(s.readInt(10)(t))()}(),f=e[">>="](l.bindEff)(a.find("input.episode-code")(n))(u.getValueText)(),c=function(){var t=e[">>="](l.bindEff)(a.find("input.episode-tvrageid")(n))(u.getValueText)();return e["return"](l.applicativeEff)(s.readInt(10)(t))()}();return function(){var n={showTitle:r,episodeTitle:t,episodeSeasonNumber:o,episodeNumber:i,episodeCode:f,episodeTVRageId:c};return e["return"](l.applicativeEff)(n)}()()}},y=function(n){return function(r){var i=[t.replace("{{episode.title}}")(n.episodeTitle),t.replace("{{episode.code}}")(n.episodeCode),t.replace("{{episode.season}}")(e.show(e.showNumber)(n.episodeSeasonNumber)),t.replace("{{show.title}}")(n.showTitle)],u=o.foldl(o.foldableArray)(e[">>>"](e.semigroupoidFn))(e.id(e.categoryFn))(i);return u(r)}},m=function(n){return function(t){var r=i.regex("[\\r\\n]+")(i.parseFlags("")),o=u.split(r)(t);return e.map(e.functorArray)(y(n))(o)}},w=function(n){return e[">>="](l.bindEff)(e[">>="](l.bindEff)(e[">>="](l.bindEff)(a.create("<a>"))(a.setText(n)))(a.setAttr("href")(n)))(a.setAttr("target")("_blank"))},E=function(n){return function(t){return function(r){return function(){f.log("click")(),a.preventDefault(t)();var o=u.getJQueryEventPageX(t)(),i=u.getJQueryEventPageY(t)(),s=a.closest(".episode")(r)(),p=g(s)();return function(){var t=m(p)(n);return function(){var n=a.create("<div>")(),s=a.create("<ul>")(),p=c["for"](l.applicativeEff)(c.traversableArray)(t)(w)();f.log("_links formatted: "+e.show(e.showArray(e.showString))(t))();var d=function(n){return function(){var t=a.create("<li>")();return a.append(n)(t)(),a.append(t)(s)()}};c["for"](l.applicativeEff)(c.traversableArray)(p)(d)(),a.append(s)(n)();var v=e.flip(a.append);e[">>="](l.bindEff)(e[">>="](l.bindEff)(e[">>="](l.bindEff)(a.create("<p>"))(a.addClass("info")))(a.setText("You can change those links in profile preferences.")))(v(n))();var g={border:"1px solid black",padding:"4pt","background-color":"white"};a.css(g)(n)(),a.addClass("episode-links")(n)();var y=a.create("<div>")();a.css({position:"absolute",left:o-32,top:i-32,padding:16,display:"none"})(y)();var m=a.parent(r)();return a.append(n)(y)(),a.append(y)(m)(),u.jQueryFadeIn(50)(y)(),u.on("mouseleave")(h)(y)(),e["return"](l.applicativeEff)(e.unit)()}}()()}}}},b=function(n){return function(){var t=a.select("tr.episode")(),r=a.select("tr.episode a.episode-links")();return u.on("mouseenter")(d)(t)(),u.on("mouseleave")(p)(t)(),u.on("click")(E(n))(r)(),f.log("EpisodeLinks: bindEvents: done")(),e["return"](l.applicativeEff)(e.unit)()}},M=function(){a.ready(e[">>="](l.bindEff)(v)(b))();return e["return"](l.applicativeEff)(e.unit)()};n.main=M,n.bindEvents=b,n.onEpisodeLinkClick=E,n.onEpisodeLinksDivLeave=h,n.createEpisodeLink=w,n.getEpisodeInfo=g,n.onEpisodeMouseLeave=p,n.onEpisodeMouseEnter=d,n.getUserEpisodeLinks=v,n.formatEpisodeLinks=m,n.formatEpisodeLink=y}(r["Episodes.EpisodeLinks"]=r["Episodes.EpisodeLinks"]||{}),function(n){"use strict";var t=r.Prelude,e=r["Control.Monad.Eff.JQuery"],o=r["Episodes.Common"],i=r["Data.Int"],u=r["Control.Monad.Eff.Console"],a=r["Control.Monad.Eff"],s=r["Data.Maybe"],f=(r.DOM,function(n){return function(n){return function(e){return function(){return u.log("fail: "+(n+(", "+e)))(),t["return"](a.applicativeEff)(t.unit)()}}}}),c=function(n){return function(n){return function(e){return function(){return u.log("onSetEpisodeStatusDone: "+n)(),t["return"](a.applicativeEff)(t.unit)()}}}},l=function(n){return o.is(":checked")(n)},p=function(n){return function(){var r=e.closest(".episode")(n)(),u=e.find(".episode-id")(r)(),s=o.getValueText(u)();return function(){var n=i.fromString(s);return t["return"](a.applicativeEff)(n)}()()}},d=function(n){return function(n){return function(){var e=o.getAuthId();return function(){if(e instanceof s.Nothing)return o.redirect("/auth/login");if(e instanceof s.Just)return function(){var e=p(n)();return function(){if(e instanceof s.Nothing)return function(){return u.log("invalid checkbox")(),t["return"](a.applicativeEff)(t.unit)()};if(e instanceof s.Just)return function(){var r=l(n)();return function(){var n={episodeStatus:r,episodeId:e.value0};return function(){var e=o.jsonStringify(n)();return function(){var n={data:e,url:"/api/set-episode-status",method:"POST",dataType:"json"};return function(){var e=o.ajax(n)(),r=o.jqXhrDone(e)(c)();o.jqXhrFail(r)(f)();return t["return"](a.applicativeEff)(t.unit)()}}()()}}()()};throw new Error("Failed pattern match at Episodes.EpisodeStatus line 42, column 1 - line 43, column 1: "+[e.constructor.name])}()()};throw new Error("Failed pattern match at Episodes.EpisodeStatus line 42, column 1 - line 43, column 1: "+[e.constructor.name])}()()}}},h=function(){return e.ready(function(){var n=e.select(".episode-status.checkbox")();return o.on("change")(d)(n)(),u.log("EpisodeStatus: main: done")()})(),t["return"](a.applicativeEff)(t.unit)()};n.main=h}(r["Episodes.EpisodeStatus"]=r["Episodes.EpisodeStatus"]||{}),function(n){"use strict";var t=r.Prelude,e=r["Control.Monad.Eff.JQuery"],o=r["Episodes.Common"],i=r.Global,u=r["Control.Monad.Eff.Console"],a=r["Data.String"],s=r["Data.BigInt"],f=(r["Control.Apply"],r["Control.Monad"],r["Control.Monad.Eff"]),c=r["Data.Maybe"],l=(r.DOM,function(n){return function(n){return function(e){return function(){return u.log("onSetSubscriptionStatusFail: "+(n+(", "+e)))(),t["return"](f.applicativeEff)(t.unit)()}}}}),p=function(n){return function(n){return function(e){return function(){return u.log("onSetSubscriptionStatusDone: "+n)(),t["return"](f.applicativeEff)(t.unit)()}}}},d=function(n){return function(){var r=e.closest(".episodes-show")(n)(),u=e.find(".show-id")(r)(),a=o.getValueText(u)();return function(){var n=i.readInt(10)(a);return t["return"](f.applicativeEff)(new c.Just(n))}()()}},h=function(n){return function(r){return function(i){return function(){e.preventDefault(r)();var s=o.getAuthId();return function(){if(s instanceof c.Nothing)return function(){return u.log("not logged in")(),o.redirect("/auth/login")(),t["return"](f.applicativeEff)(t.unit)()};if(s instanceof c.Just)return function(){u.log("auth id: "+t.show(c.showMaybe(t.showString))(s))();var r=d(i)();return function(){if(r instanceof c.Nothing)return u.log("can't find show id");if(r instanceof c.Just){var i={status:n,showId:r.value0};return function(){var s=o.jsonStringify(i)();return function(){var i={data:s,url:"/api/set-show-subscription-status",method:"POST",dataType:"json"};return function(){var s=o.ajax(i)(),c=o.jqXhrDone(s)(p)();o.jqXhrFail(c)(l)();return function(){var i=".show-"+(a.takeWhile(function(n){return t["/="](t.eqChar)(n)(".")})(t.show(t.showNumber)(r.value0))+".episodes-show");return function(){var r=e.select(i)();return u.log("found "+(t.show(t.showInt)(o.size(r))+(" show elements of class "+i)))(),function(){if(n)return function(){return e.removeClass("not-subscribed")(r)(),e.addClass("subscribed")(r)()};if(!n)return function(){return e.removeClass("subscribed")(r)(),e.addClass("not-subscribed")(r)()};throw new Error("Failed pattern match at Episodes.ShowSubscriptions line 44, column 1 - line 45, column 1: "+[n.constructor.name])}()(),t["return"](f.applicativeEff)(t.unit)()}}()()}}()()}}throw new Error("Failed pattern match at Episodes.ShowSubscriptions line 44, column 1 - line 45, column 1: "+[r.constructor.name])}()()};throw new Error("Failed pattern match at Episodes.ShowSubscriptions line 44, column 1 - line 45, column 1: "+[s.constructor.name])}()()}}}},v=function(){var n=e.select(".subscribe-show")(),r=e.select(".unsubscribe-show")();return function(){var e=o.size(n);if(0===e)return u.log("no sub buttons found");var r=s.fromInt(e);return u.log("found "+(t.show(s.showBigInt)(r)+" sub buttons"))}()(),o.on("click")(h(!0))(n)(),o.on("click")(h(!1))(r)(),u.log("ShowSubscriptions: bindButtonActions: done")(),t["return"](f.applicativeEff)(t.unit)()},g=function(){return e.ready(function(){return u.log("ShowSubscriptions: main")(),v(),u.log("ShowSubscriptions: done")()})(),t["return"](f.applicativeEff)(t.unit)()};n.main=g}(r["Episodes.ShowSubscriptions"]=r["Episodes.ShowSubscriptions"]||{}),function(n){"use strict";var t=r.Prelude,e=r["Control.Monad.Eff.Console"],o=r["Episodes.Common"],i=r["Control.Monad.Eff.JQuery"],u=r["Data.Int"],a=r["Control.Monad.Eff"],s=r["Data.Maybe"],f=(r.DOM,function(n){return function(n){return function(n){return function(){return e.log("fail")(),t["return"](a.applicativeEff)(t.unit)()}}}}),c=function(n){return function(n){return function(n){return function(){return e.log("done")(),t["return"](a.applicativeEff)(t.unit)()}}}},l=function(n){return function(){var e=o.is("tr.season")(n)();return function(){if(e)return t["return"](a.applicativeEff)(n);if(!e)return function(){var t=o.prevAll("tr.season")(n)();return o.first(t)()};throw new Error("Failed pattern match at Episodes.SeasonExpandCollapse line 46, column 1 - line 47, column 1: "+[e.constructor.name])}()()}},p=function(n){return function(n){return function(){var e=l(n)(),r=i.find("div.collapse-season-hover")(e)();return i.css({visibility:"visible"})(r)(),t["return"](a.applicativeEff)(t.unit)()}}},d=function(n){return function(n){return function(){var e=l(n)(),r=i.find("div.collapse-season-hover")(e)();return i.css({visibility:"hidden"})(r)(),t["return"](a.applicativeEff)(t.unit)()}}},h=function(n){return function(r){return function(){e.log("ajaxSetSeasonCollapse: setting collapse to: "+t.show(t.showBoolean)(n))();var i=o.jsonStringify({season:r,collapse:n})();e.log("req: "+i)();var u={data:i,url:"/api/set-season-collapse",method:"POST",dataType:"json"},s=o.ajax(u)(),l=o.jqXhrDone(s)(c)();o.jqXhrFail(l)(f)();return t["return"](a.applicativeEff)(t.unit)()}}},v=function(n){return function(r){return function(f){return function(){i.preventDefault(r)();var c=i.closest("tr.season")(f)(),l=function(){var n=t[">>="](a.bindEff)(i.find("td.show-season")(c))(o.getAttr("data-season-id"))();return t["return"](a.applicativeEff)(u.fromString(n))()}();return function(){if(l instanceof s.Nothing)return function(){return e.log("no season number")(),t["return"](a.applicativeEff)(t.unit)()};if(l instanceof s.Just)return function(){h(!n)(l.value0)();var e=o.nextUntil("tr.season")(c)(),r=i.find("div.expand-season")(c)(),u=i.find("div.collapse-season")(c)();return function(){if(n)return function(){return i.css({display:"table-row"})(e)(),i.css({display:"none"})(r)(),i.css({display:"block"})(u)()};if(!n)return function(){return i.css({display:"none"})(e)(),i.css({display:"block"})(r)(),i.css({display:"none"})(u)()};throw new Error("Failed pattern match at Episodes.SeasonExpandCollapse line 72, column 1 - line 73, column 1: "+[n.constructor.name])}()(),t["return"](a.applicativeEff)(t.unit)()};throw new Error("Failed pattern match at Episodes.SeasonExpandCollapse line 72, column 1 - line 73, column 1: "+[l.constructor.name])}()()}}}},g=function(){return i.ready(function(){e.log("SeasonExpandCollapse.main/ready start")();var n=i.select("tr.season, tr.episode")();e.log("SeasonExpandCollapse: have "+(t.show(t.showInt)(o.size(n))+" trs"))(),i.on("mouseenter")(p)(n)(),i.on("mouseleave")(d)(n)();var r=i.select("tr.season td a.expand-season")(),u=i.select("tr.season td a.collapse-season")();return i.on("click")(v(!0))(r)(),i.on("click")(v(!1))(u)(),e.log("SeasonExpandCollapse.main/ready done")()})(),t["return"](a.applicativeEff)(t.unit)()};n.main=g}(r["Episodes.SeasonExpandCollapse"]=r["Episodes.SeasonExpandCollapse"]||{}),function(n){"use strict";var t=(r.Prelude,r["Episodes.EpisodeLinks"]),e=r["Episodes.EpisodeStatus"],o=r["Episodes.ShowSubscriptions"],i=r["Episodes.SeasonExpandCollapse"],u=(r["Control.Monad.Eff"],r["Control.Monad.Eff.Console"],r.DOM,function(){return t.main(),e.main(),o.main(),i.main()});n.main=u}(r.Episodes=r.Episodes||{}),r.Episodes.main()},{"big-integer":2}],2:[function(n,t,e){var r=function(n){"use strict";function t(n,t){this.value=n,this.sign=t,this.isSmall=!1}function e(n){this.value=n,this.sign=0>n,this.isSmall=!0}function o(n){return n>-J&&J>n}function i(n){return 1e7>n?[n]:1e14>n?[n%1e7,Math.floor(n/1e7)]:[n%1e7,Math.floor(n/1e7)%1e7,Math.floor(n/1e14)]}function u(n){a(n);var t=n.length;if(4>t&&C(n,Q)<0)switch(t){case 0:return 0;case 1:return n[0];case 2:return n[0]+n[1]*T;default:return n[0]+(n[1]+n[2]*T)*T}return n}function a(n){for(var t=n.length;0===n[--t];);n.length=t+1}function s(n){for(var t=new Array(n),e=-1;++e<n;)t[e]=0;return t}function f(n){return n>0?Math.floor(n):Math.ceil(n)}function c(n,t){var e,r,o=n.length,i=t.length,u=new Array(o),a=0,s=T;for(r=0;i>r;r++)e=n[r]+t[r]+a,a=e>=s?1:0,u[r]=e-a*s;for(;o>r;)e=n[r]+a,a=e===s?1:0,u[r++]=e-a*s;return a>0&&u.push(a),u}function l(n,t){return n.length>=t.length?c(n,t):c(t,n)}function p(n,t){var e,r,o=n.length,i=new Array(o),u=T;for(r=0;o>r;r++)e=n[r]-u+t,t=Math.floor(e/u),i[r]=e-t*u,t+=1;for(;t>0;)i[r++]=t%u,t=Math.floor(t/u);return i}function d(n,t){var e,r,o=n.length,i=t.length,u=new Array(o),s=0,f=T;for(e=0;i>e;e++)r=n[e]-s-t[e],0>r?(r+=f,s=1):s=0,u[e]=r;for(e=i;o>e;e++){if(r=n[e]-s,!(0>r)){u[e++]=r;break}r+=f,u[e]=r}for(;o>e;e++)u[e]=n[e];return a(u),u}function h(n,r,o){var i;return C(n,r)>=0?i=d(n,r):(i=d(r,n),o=!o),i=u(i),"number"==typeof i?(o&&(i=-i),new e(i)):new t(i,o)}function v(n,r,o){var i,a,s=n.length,f=new Array(s),c=-r,l=T;for(i=0;s>i;i++)a=n[i]+c,c=Math.floor(a/l),f[i]=0>a?a%l+l:a;return f=u(f),"number"==typeof f?(o&&(f=-f),new e(f)):new t(f,o)}function g(n,t){var e,r,o,i,u,f=n.length,c=t.length,l=f+c,p=s(l),d=T;for(o=0;f>o;++o){i=n[o];for(var h=0;c>h;++h)u=t[h],e=i*u+p[o+h],r=Math.floor(e/d),p[o+h]=e-r*d,p[o+h+1]+=r}return a(p),p}function y(n,t){var e,r,o=n.length,i=new Array(o),u=T,a=0;for(r=0;o>r;r++)e=n[r]*t+a,a=Math.floor(e/u),i[r]=e-a*u;for(;a>0;)i[r++]=a%u,a=Math.floor(a/u);return i}function m(n,t){for(var e=[];t-->0;)e.push(0);return e.concat(n)}function w(n,t){var e=Math.max(n.length,t.length);if(400>=e)return g(n,t);e=Math.ceil(e/2);var r=n.slice(e),o=n.slice(0,e),i=t.slice(e),u=t.slice(0,e),a=w(o,u),s=w(r,i),f=w(l(o,r),l(u,i));return l(l(a,m(d(d(f,a),s),e)),m(s,2*e))}function E(n){var t,e,r,o,i,u=n.length,f=s(u+u),c=T;for(r=0;u>r;r++){o=n[r];for(var l=0;u>l;l++)i=n[l],t=o*i+f[r+l],e=Math.floor(t/c),
f[r+l]=t-e*c,f[r+l+1]+=e}return a(f),f}function b(n,t){var e,r,o,i,a,f,c,l=n.length,p=t.length,d=T,h=s(t.length),v=t[p-1],g=Math.ceil(d/(2*v)),m=y(n,g),w=y(t,g);for(m.length<=l&&m.push(0),w.push(0),v=w[p-1],r=l-p;r>=0;r--){for(e=d-1,e=Math.floor((m[r+p]*d+m[r+p-1])/v),o=0,i=0,f=w.length,a=0;f>a;a++)o+=e*w[a],c=Math.floor(o/d),i+=m[r+a]-(o-c*d),o=c,0>i?(m[r+a]=i+d,i=-1):(m[r+a]=i,i=0);for(;0!==i;){for(e-=1,o=0,a=0;f>a;a++)o+=m[r+a]-d+w[a],0>o?(m[r+a]=o+d,o=0):(m[r+a]=o,o=1);i+=o}h[r]=e}return m=S(m,g)[0],[u(h),u(m)]}function M(n,t){for(var e,r,o,i,a,s=n.length,f=t.length,c=[],l=[],p=T;s;)if(l.unshift(n[--s]),C(l,t)<0)c.push(0);else{r=l.length,o=l[r-1]*p+l[r-2],i=t[f-1]*p+t[f-2],r>f&&(o=(o+1)*p),e=Math.ceil(o/i);do{if(a=y(t,e),C(a,l)<=0)break;e--}while(e);c.push(e),l=d(l,a)}return c.reverse(),[u(c),u(l)]}function S(n,t){var e,r,o,i,u=n.length,a=s(u),c=T;for(o=0,e=u-1;e>=0;--e)i=o*c+n[e],r=f(i/t),o=i-r*t,a[e]=0|r;return[a,0|o]}function D(n,r){var o,a,s=O(r),c=n.value,l=s.value;if(0===l)throw new Error("Cannot divide by zero");if(n.isSmall)return s.isSmall?[new e(f(c/l)),new e(c%l)]:[U[0],n];if(s.isSmall){if(1===l)return[n,U[0]];if(-1==l)return[n.negate(),U[0]];var p=Math.abs(l);if(T>p){o=S(c,p),a=u(o[0]);var d=o[1];return n.sign&&(d=-d),"number"==typeof a?(n.sign!==s.sign&&(a=-a),[new e(a),new e(d)]):[new t(a,n.sign!==s.sign),new e(d)]}l=i(p)}var h=C(c,l);if(-1===h)return[U[0],n];if(0===h)return[U[n.sign===s.sign?1:-1],U[0]];o=c.length+l.length<=200?b(c,l):M(c,l),a=o[0];var v=n.sign!==s.sign,g=o[1],y=n.sign;return"number"==typeof a?(v&&(a=-a),a=new e(a)):a=new t(a,v),"number"==typeof g?(y&&(g=-g),g=new e(g)):g=new t(g,y),[a,g]}function C(n,t){if(n.length!==t.length)return n.length>t.length?1:-1;for(var e=n.length-1;e>=0;e--)if(n[e]!==t[e])return n[e]>t[e]?1:-1;return 0}function x(n){return("number"==typeof n||"string"==typeof n)&&+Math.abs(n)<=T||n instanceof t&&n.value.length<=1}function A(n,t,e){t=O(t);for(var o=n.isNegative(),i=t.isNegative(),u=o?n.not():n,a=i?t.not():t,s=[],f=[],c=!1,l=!1;!c||!l;)u.isZero()?(c=!0,s.push(o?1:0)):o?s.push(u.isEven()?1:0):s.push(u.isEven()?0:1),a.isZero()?(l=!0,f.push(i?1:0)):i?f.push(a.isEven()?1:0):f.push(a.isEven()?0:1),u=u.over(2),a=a.over(2);for(var p=[],d=0;d<s.length;d++)p.push(e(s[d],f[d]));for(var h=r(p.pop()).negate().times(r(2).pow(p.length));p.length;)h=h.add(r(p.pop()).times(r(2).pow(p.length)));return h}function _(n,t){return n=O(n),t=O(t),n.greater(t)?n:t}function q(n,t){return n=O(n),t=O(t),n.lesser(t)?n:t}function P(n,t){return n=O(n).abs(),t=O(t).abs(),n.equals(t)?n:n.isZero()?t:t.isZero()?n:n.isEven()?t.isOdd()?P(n.divide(2),t):P(n.divide(2),t.divide(2)).multiply(2):t.isEven()?P(n,t.divide(2)):n.greater(t)?P(n.subtract(t).divide(2),t):P(t.subtract(n).divide(2),n)}function I(n,t){return n=O(n).abs(),t=O(t).abs(),n.multiply(t).divide(P(n,t))}function j(n,e){n=O(n),e=O(e);var r=q(n,e),o=_(n,e),i=o.subtract(r);if(i.isSmall)return r.add(Math.random()*i);for(var a=i.value.length-1,s=[],c=!0,l=a;l>=0;l--){var p=c?i.value[l]:T,d=f(Math.random()*p);s.unshift(d),p>d&&(c=!1)}return s=u(s),r.add(new t(s,!1,"number"==typeof s))}function F(n){var t=n.value;return"number"==typeof t&&(t=[t]),1===t.length&&t[0]<=36?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t[0]):"<"+t+">"}function k(n,t){if(t=r(t),t.isZero()){if(n.isZero())return"0";throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1))return n.isZero()?"0":n.isNegative()?new Array(1-n).join("10"):"1"+new Array(+n).join("01");var e="";if(n.isNegative()&&t.isPositive()&&(e="-",n=n.abs()),t.equals(1))return n.isZero()?"0":e+new Array(+n+1).join(1);for(var o,i=[],u=n;u.isNegative()||u.compareAbs(t)>=0;){o=u.divmod(t),u=o.quotient;var a=o.remainder;a.isNegative()&&(a=t.minus(a).abs(),u=u.next()),i.push(F(a))}return i.push(F(u)),e+i.reverse().join("")}function O(n){if(n instanceof t||n instanceof e)return n;if("number"==typeof n){if(o(n))return new e(n);n=String(n)}if("string"==typeof n){if(o(+n)){var r=+n;if(r===f(r))return new e(r);throw"Invalid integer: "+n}var i="-"===n[0];i&&(n=n.slice(1));var u=n.split(/e/i);if(u.length>2)throw new Error("Invalid integer: "+c.join("e"));if(2===u.length){var s=u[1];if("+"===s[0]&&(s=s.slice(1)),s=+s,s!==f(s)||!o(s))throw new Error("Invalid integer: "+s+" is not a valid exponent.");var c=u[0],l=c.indexOf(".");if(l>=0&&(s-=c.length-l,c=c.slice(0,l)+c.slice(l+1)),0>s)throw new Error("Cannot include negative exponent part for integers");c+=new Array(s+1).join("0"),n=c}var p=/^([0-9][0-9]*)$/.test(n);if(!p)throw new Error("Invalid integer: "+n);for(var d=[],h=n.length,v=N,g=h-v;h>0;)d.push(+n.slice(g,h)),g-=v,0>g&&(g=0),h-=v;return a(d),new t(d,i)}}var T=1e7,N=7,J=9007199254740992,Q=i(J),B=Math.log(J);t.prototype.add=function(n){var e=O(n);if(this.sign!==e.sign)return this.subtract(e.negate());var r=this.value,o=e.value;return e.isSmall?new t(p(r,Math.abs(o)),this.sign):new t(l(r,o),this.sign)},t.prototype.plus=t.prototype.add,e.prototype.add=function(n){var r=O(n),u=this.value;if(0>u!==r.sign)return this.subtract(r.negate());var a=r.value;if(r.isSmall){if(o(u+a))return new e(u+a);a=i(Math.abs(a))}return new t(p(a,Math.abs(u)),0>u)},e.prototype.plus=e.prototype.add,t.prototype.subtract=function(n){var t=O(n);if(this.sign!==t.sign)return this.add(t.negate());var e=this.value,r=t.value;return t.isSmall?v(e,Math.abs(r),this.sign):h(e,r,this.sign)},t.prototype.minus=t.prototype.subtract,e.prototype.subtract=function(n){var t=O(n),r=this.value;if(0>r!==t.sign)return this.add(t.negate());var o=t.value;return t.isSmall?new e(r-o):v(o,Math.abs(r),r>=0)},e.prototype.minus=e.prototype.subtract,t.prototype.negate=function(){return new t(this.value,!this.sign)},e.prototype.negate=function(){var n=this.sign,t=new e(-this.value);return t.sign=!n,t},t.prototype.abs=function(){return new t(this.value,!1)},e.prototype.abs=function(){return new e(Math.abs(this.value))},t.prototype.multiply=function(n){var e,r=O(n),o=this.value,u=r.value,a=this.sign!==r.sign;if(r.isSmall){if(0===u)return U[0];if(1===u)return this;if(-1===u)return this.negate();if(e=Math.abs(u),T>e)return new t(y(o,e),a);u=i(e)}return o.length+u.length>4e3?new t(w(o,u),a):new t(g(o,u),a)},t.prototype.times=t.prototype.multiply,e.prototype.multiply=function(n){var r=O(n),u=this.value,a=r.value;if(0===u)return U[0];if(1===u)return r;if(-1===u)return r.negate();if(r.isSmall){if(o(u*a))return new e(u*a);a=i(Math.abs(a))}var s=Math.abs(u);return T>s?new t(y(a,s),this.sign!==r.sign):new t(g(a,i(s)),this.sign!==r.sign)},e.prototype.times=e.prototype.multiply,t.prototype.square=function(){return new t(E(this.value),!1)},e.prototype.square=function(){var n=this.value*this.value;return o(n)?new e(n):new t(E(i(Math.abs(this.value))),!1)},t.prototype.divmod=function(n){var t=D(this,n);return{quotient:t[0],remainder:t[1]}},e.prototype.divmod=t.prototype.divmod,t.prototype.divide=function(n){return D(this,n)[0]},e.prototype.over=e.prototype.divide=t.prototype.over=t.prototype.divide,t.prototype.mod=function(n){return D(this,n)[1]},e.prototype.remainder=e.prototype.mod=t.prototype.remainder=t.prototype.mod,t.prototype.pow=function(n){var t,r,i,u=O(n),a=this.value,s=u.value;if(0===s)return U[1];if(0===a)return U[0];if(1===a)return U[1];if(-1===a)return u.isEven()?U[1]:U[-1];if(u.sign)return U[0];if(!u.isSmall)throw new Error("The exponent "+u.toString()+" is too large.");if(this.isSmall&&o(t=Math.pow(a,s)))return new e(f(t));for(r=this,i=U[1];;){if(s&!0&&(i=i.times(r),--s),0===s)break;s/=2,r=r.square()}return i},e.prototype.pow=t.prototype.pow,t.prototype.modPow=function(n,t){if(n=O(n),t=O(t),t.isZero())throw new Error("Cannot take modPow with modulus 0");var e=U[1],r=this.mod(t);if(r.isZero())return U[0];for(;n.isPositive();)n.isOdd()&&(e=e.multiply(r).mod(t)),n=n.divide(2),r=r.square().mod(t);return e},e.prototype.modPow=t.prototype.modPow,t.prototype.compareAbs=function(n){var t=O(n),e=this.value,r=t.value;return t.isSmall?1:C(e,r)},e.prototype.compareAbs=function(n){var t=O(n),e=Math.abs(this.value),r=t.value;return t.isSmall?(r=Math.abs(r),e===r?0:e>r?1:-1):-1},t.prototype.compare=function(n){var t=O(n),e=this.value,r=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:C(e,r)*(this.sign?-1:1)},t.prototype.compareTo=t.prototype.compare,e.prototype.compare=function(n){var t=O(n),e=this.value,r=t.value;return t.isSmall?e==r?0:e>r?1:-1:0>e!==t.sign?0>e?-1:1:0>e?1:-1},e.prototype.compareTo=e.prototype.compare,t.prototype.equals=function(n){return 0===this.compare(n)},e.prototype.eq=e.prototype.equals=t.prototype.eq=t.prototype.equals,t.prototype.notEquals=function(n){return 0!==this.compare(n)},e.prototype.neq=e.prototype.notEquals=t.prototype.neq=t.prototype.notEquals,t.prototype.greater=function(n){return this.compare(n)>0},e.prototype.gt=e.prototype.greater=t.prototype.gt=t.prototype.greater,t.prototype.lesser=function(n){return this.compare(n)<0},e.prototype.lt=e.prototype.lesser=t.prototype.lt=t.prototype.lesser,t.prototype.greaterOrEquals=function(n){return this.compare(n)>=0},e.prototype.geq=e.prototype.greaterOrEquals=t.prototype.geq=t.prototype.greaterOrEquals,t.prototype.lesserOrEquals=function(n){return this.compare(n)<=0},e.prototype.leq=e.prototype.lesserOrEquals=t.prototype.leq=t.prototype.lesserOrEquals,t.prototype.isEven=function(){return 0===(1&this.value[0])},e.prototype.isEven=function(){return 0===(1&this.value)},t.prototype.isOdd=function(){return 1===(1&this.value[0])},e.prototype.isOdd=function(){return 1===(1&this.value)},t.prototype.isPositive=function(){return!this.sign},e.prototype.isPositive=function(){return this.value>0},t.prototype.isNegative=function(){return this.sign},e.prototype.isNegative=function(){return this.value<0},t.prototype.isUnit=function(){return!1},e.prototype.isUnit=function(){return 1===Math.abs(this.value)},t.prototype.isZero=function(){return!1},e.prototype.isZero=function(){return 0===this.value},t.prototype.isDivisibleBy=function(n){var t=O(n),e=t.value;return 0===e?!1:1===e?!0:2===e?this.isEven():this.mod(t).equals(U[0])},e.prototype.isDivisibleBy=t.prototype.isDivisibleBy,t.prototype.isPrime=function(){var n=this.abs(),t=n.prev();if(n.isUnit())return!1;if(n.equals(2)||n.equals(3)||n.equals(5))return!0;if(n.isEven()||n.isDivisibleBy(3)||n.isDivisibleBy(5))return!1;if(n.lesser(25))return!0;for(var e,o,i,u,a=[2,3,5,7,11,13,17,19],s=t;s.isEven();)s=s.divide(2);for(i=0;i<a.length;i++)if(u=r(a[i]).modPow(s,n),!u.equals(U[1])&&!u.equals(t)){for(o=!0,e=s;o&&e.lesser(t);e=e.multiply(2))u=u.square().mod(n),u.equals(t)&&(o=!1);if(o)return!1}return!0},e.prototype.isPrime=t.prototype.isPrime,t.prototype.next=function(){var n=this.value;return this.sign?v(n,1,this.sign):new t(p(n,1),this.sign)},e.prototype.next=function(){var n=this.value;return J>n+1?new e(n+1):new t(Q,!1)},t.prototype.prev=function(){var n=this.value;return this.sign?new t(p(n,1),!0):v(n,1,this.sign)},e.prototype.prev=function(){var n=this.value;return n-1>-J?new e(n-1):new t(Q,!0)};for(var L=[1];L[L.length-1]<=T;)L.push(2*L[L.length-1]);var R=L.length,X=L[R-1];t.prototype.shiftLeft=function(n){if(!x(n))return n.isNegative()?this.shiftRight(n.abs()):this.times(U[2].pow(n));if(n=+n,0>n)return this.shiftRight(-n);for(var t=this;n>=R;)t=t.multiply(X),n-=R-1;return t.multiply(L[n])},e.prototype.shiftLeft=t.prototype.shiftLeft,t.prototype.shiftRight=function(n){var t;if(!x(n))return n.isNegative()?this.shiftLeft(n.abs()):(t=this.divmod(U[2].pow(n)),t.remainder.isNegative()?t.quotient.prev():t.quotient);if(n=+n,0>n)return this.shiftLeft(-n);for(var e=this;n>=R;){if(e.isZero())return e;t=D(e,X),e=t[1].isNegative()?t[0].prev():t[0],n-=R-1}return t=D(e,L[n]),t[1].isNegative()?t[0].prev():t[0]},e.prototype.shiftRight=t.prototype.shiftRight,t.prototype.not=function(){return this.negate().prev()},e.prototype.not=t.prototype.not,t.prototype.and=function(n){return A(this,n,function(n,t){return n&t})},e.prototype.and=t.prototype.and,t.prototype.or=function(n){return A(this,n,function(n,t){return n|t})},e.prototype.or=t.prototype.or,t.prototype.xor=function(n){return A(this,n,function(n,t){return n^t})},e.prototype.xor=t.prototype.xor;var V=function(n,t){var r=U[0],o=U[1],i=n.length;if(t>=2&&36>=t&&i<=B/Math.log(t))return new e(parseInt(n,t));t=O(t);var u,a=[],s="-"===n[0];for(u=s?1:0;u<n.length;u++){var f=n[u].toLowerCase(),c=f.charCodeAt(0);if(c>=48&&57>=c)a.push(O(f));else if(c>=97&&122>=c)a.push(O(f.charCodeAt(0)-87));else{if("<"!==f)throw new Error(f+" is not a valid character");var l=u;do u++;while(">"!==n[u]);a.push(O(n.slice(l+1,u)))}}for(a.reverse(),u=0;u<a.length;u++)r=r.add(a[u].times(o)),o=o.times(t);return s?r.negate():r};t.prototype.toString=function(t){if(t===n&&(t=10),10!==t)return k(this,t);for(var e,r=this.value,o=r.length,i=String(r[--o]),u="0000000";--o>=0;)e=String(r[o]),i+=u.slice(e.length)+e;var a=this.sign?"-":"";return a+i},e.prototype.toString=function(t){return t===n&&(t=10),10!=t?k(this,t):String(this.value)},t.prototype.valueOf=function(){return+this.toString()},t.prototype.toJSNumber=t.prototype.valueOf,e.prototype.valueOf=function(){return this.value},e.prototype.toJSNumber=e.prototype.valueOf;for(var U=function(n,t){return"undefined"==typeof n?U[0]:"undefined"!=typeof t?10===+t?O(n):V(n,t):O(n)},Z=0;1e3>Z;Z++)U[Z]=new e(Z),Z>0&&(U[-Z]=new e(-Z));return U.one=U[1],U.zero=U[0],U.minusOne=U[-1],U.max=_,U.min=q,U.gcd=P,U.lcm=I,U.isInstance=function(n){return n instanceof t||n instanceof e},U.randBetween=j,U}();"undefined"!=typeof t&&t.hasOwnProperty("exports")&&(t.exports=r)},{}]},{},[1]);
